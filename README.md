# Лабораторная работа №2: Проектирование и интеграция базы данных

## Цель работы

Спроектировать реляционную структуру базы данных для предметной области и подготовить миграцию in-memory хранилища на PostgreSQL с реализацией бизнес-логики работы с заявками.

## Задачи на лабораторную работу

1. **Проектирование БД:**
   - Разработать ER-диаграмму в StarUML
   - Спроектировать 4 обязательные таблицы с связями
   - Определить типы данных и ограничения для полей

2. **Реализация в PostgreSQL:**
   - Создать структуру БД в Docker-контейнере
   - Реализовать составные уникальные ключи
   - Добавить 5 статусов заявок с ограничениями

3. **Интеграция с Django:**
   - Создать модели ORM с учетом требований
   - Настроить панель администратора
   - Реализовать 5 HTTP-методов:
     - 3 GET: список услуг, детали услуги, просмотр заявки
     - 2 POST: добавление в заявку (ORM), удаление заявки (RAW SQL)

4. **Бизнес-логика:**
   - Реализовать логическое удаление через UPDATE запрос
   - Обеспечить работу с единственной "корзиной" на пользователя
   - Добавить расчетные поля для заявок

## Структура БД

**Таблицы:**

1. **Услуги** (`services_service`)
   - id, название, описание, статус, цена, URL изображения
   - поля предметной области

2. **Заявки** (`services_order`) 
   - id, статус (5 значений), даты создания/формирования/завершения
   - создатель, модератор, поля предметной области

3. **Связь M-M** (`services_orderitem`)
   - составной уникальный ключ (order_id + service_id)
   - количество, порядок, дополнительные поля

4. **Пользователи** (`auth_user`)
   - использование системной таблицы Django
   - логин, пароль, признак модератора
